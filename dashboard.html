<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UH-60M Flight Replay Dashboard</title>
  <link rel="stylesheet" href="dashboard.css" />
  <!-- g3 (gauges) -->
  <script src="https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js"></script>
  <script src="g3-master/dist/g3.min.js"></script>
  <script src="g3-master/dist/g3-contrib.min.js"></script>
  <!-- PapaParse for robust CSV parsing -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <!-- Leaflet for map -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">UH-60M Flight Replay</div>
    <div class="meta">MOJO 69 · 10 Mar 2015 · Training near Hurlburt Field</div>
  </header>

  <main class="layout">
    <section class="gauges">
      <div id="gauges" aria-label="Flight Instruments"></div>
      <div id="comms-bubble" class="comms-bubble" aria-live="polite" aria-atomic="true"></div>
    </section>
    <aside class="context" aria-label="Context">
      <div class="card">
        <h3>Context</h3>
        <ul>
          <li>IMC/DVE over water, 0% moon illumination</li>
          <li>Ceiling ~300 ft OVC; visibility ~1 sm (KHRT)</li>
          <li>Spatial disorientation after crossing shoreline</li>
        </ul>
      </div>
      <div class="card" id="event-now">
        <h3>Timeline Event</h3>
        <div class="event-body" id="event-body">—</div>
      </div>
      <div class="card" id="live-stats">
        <h3>Now</h3>
        <div class="stats-grid" id="stats-grid">
          <div class="kv"><div class="k">Time</div><div class="v" id="stat-time">--:--:--</div></div>
          <div class="kv"><div class="k">TAS</div><div class="v" id="stat-tas">—</div></div>
          <div class="kv"><div class="k">Alt (ft)</div><div class="v" id="stat-alt">—</div></div>
          <div class="kv"><div class="k">VS (fpm)</div><div class="v" id="stat-vs">—</div></div>
          <div class="kv"><div class="k">GS</div><div class="v" id="stat-gs">—</div></div>
          <div class="kv"><div class="k">ENG1 TQ %</div><div class="v" id="stat-tq1">—</div></div>
          <div class="kv"><div class="k">ENG2 TQ %</div><div class="v" id="stat-tq2">—</div></div>
        </div>
        <div id="risk-badges" class="risk-badges"></div>
      </div>
      <div class="card" id="highlights">
        <h3>Highlights</h3>
        <div id="highlight-list" class="highlight-list"></div>
      </div>
    </aside>

    <section class="timeline">
      <div class="controls">
        <label class="time-label"><span id="clock">--:--:--</span></label>
        <div class="spacer"></div>
        <label>Speed
          <select id="speed">
            <option value="0.5">0.5×</option>
            <option value="1" selected>1×</option>
            <option value="2">2×</option>
            <option value="4">4×</option>
          </select>
        </label>
      </div>
      <div class="slider-wrap">
        <label for="time" class="visually-hidden">Time</label>
        <input type="range" id="time" min="0" max="0" step="1" value="0" aria-label="Time" />
        <div id="markers" class="markers" aria-hidden="true"></div>
      </div>
    </section>

    <section class="charts" aria-label="Flight Metrics">
      <div class="chart-controls">
        <div class="label">Chart</div>
        <label>Left Y
          <select id="yLeft">
            <option value="altitude" selected>Altitude (ft)</option>
            <option value="tas">TAS (kt)</option>
            <option value="gs">Ground Speed (kt)</option>
            <option value="vs">Vertical Speed (fpm)</option>
            <option value="tq1">ENG1 TQ (%)</option>
            <option value="tq2">ENG2 TQ (%)</option>
          </select>
        </label>
        <label>Right Y
          <select id="yRight">
            <option value="tas" selected>TAS (kt)</option>
            <option value="gs">Ground Speed (kt)</option>
            <option value="vs">Vertical Speed (fpm)</option>
            <option value="altitude">Altitude (ft)</option>
            <option value="tq1">ENG1 TQ (%)</option>
            <option value="tq2">ENG2 TQ (%)</option>
          </select>
        </label>
        <div class="spacer"></div>
        <div class="legend" id="chart-legend"></div>
        <div class="spacer"></div>
        <label>Smoothing
          <input id="smooth" type="range" min="0" max="12" step="1" value="4" />
        </label>
      </div>
      <div class="chart-wrap">
        <svg id="chart" role="img" aria-label="Metrics chart"></svg>
      </div>
    </section>

    <section class="map" aria-label="Flight Path Map">
      <div id="map" role="img" aria-label="Georeferenced flight path"></div>
    </section>



    <section class="transcripts" aria-label="Cockpit Transcript">
      <div class="transcript-header">
        <h3>Cockpit Transcript</h3>
      </div>
      <div id="transcript-list" class="transcript-list"></div>
    </section>
  </main>

  <script src="dashboard.js"></script>
</body>
</html>



:root {
	--bg: #0d1117;
	--card: #161b22;
	--fg: #c9d1d9;
	--muted: #8b949e;
	--accent: #58a6ff;
	--danger: #ff6b6b;
	--good: #3fb950;
}

* { box-sizing: border-box; }

body {
	margin: 0;
	font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
	background: var(--bg);
	color: var(--fg);
}

.topbar {
	position: sticky;
	top: 0;
	background: linear-gradient(180deg, rgba(13,17,23,.95), rgba(13,17,23,.7));
	-webkit-backdrop-filter: blur(6px);
	backdrop-filter: blur(6px);
	border-bottom: 1px solid #21262d;
	padding: 12px 20px;
	display: flex;
	align-items: baseline;
	gap: 16px;
}
.brand { font-weight: 700; letter-spacing: 0.3px; }
.meta { color: var(--muted); font-size: 13px; }

.layout {
	display: grid;
	grid-template-columns: 2fr 1fr;
	grid-template-rows: auto auto auto auto;
	column-gap: 12px;
	row-gap: 0px;
	padding: 12px;
}

.gauges {
	grid-column: 1 / 2;
	grid-row: 1 / 2;
	background: var(--card);
	border: 1px solid #21262d;
	border-radius: 12px 12px 0px 0px;
	padding: 4px;
	position: relative;
	height: fit-content;
	min-height: 350px;
	overflow: visible;
	margin-bottom: 0;
}

/* Make gauges scale to container width for better spacing */
#gauges svg { width: 100%; height: auto; display: block; }

.context { grid-column: 2 / 3; grid-row: 1 / 2; display: grid; gap: 8px; overflow: auto; align-content: start; height: fit-content; margin: 0; border-radius: 12px 12px 0px 0px; }
.card {
	background: var(--card);
	border: 1px solid #21262d;
	border-radius: 8px;
	padding: 8px 12px;
	margin: 0;
}
.card h3 { margin: 2px 0 6px; font-size: 13px; color: var(--muted); font-weight: 600; }
.card ul { margin: 0; padding-left: 16px; color: var(--fg); font-size: 13px; }
.context .card:first-child { max-height: 180px; overflow: auto; }



.timeline {
	grid-column: 1 / 2;
	grid-row: 2 / 3;
	background: var(--card);
	border: 1px solid #21262d;
	border-radius: 0px 0px 12px 12px;
	padding: 6px 12px;
	height: 60px;
	margin: 0;
	margin-top: -25px;
	border-top: none;
}
.controls { display: flex; align-items: center; gap: 12px; }
.controls .spacer { flex: 1; }
.time-label { color: var(--muted); font-size: 13px; }
.controls select { background: #0f141a; color: var(--fg); border: 1px solid #242b33; border-radius: 8px; padding: 4px 6px; }

/* Play button removed */

/* Smooth range aesthetics */
#smooth { vertical-align: middle; accent-color: var(--accent); }

.slider-wrap { position: relative; margin-top: 8px; }
#time { width: 100%; }
.markers { position: absolute; left: 0; right: 0; top: 50%; transform: translateY(-50%); height: 0; pointer-events: none; }
.markers .mark { position: absolute; width: 2px; height: 10px; background: var(--muted); opacity: .6; border-radius: 1px; }


.transcripts {
	grid-column: 2 / 3;
	grid-row: 2 / 3;
	background: var(--card);
	border: 1px solid #21262d;
	border-radius: 0px 0px 12px 12px;
	overflow: hidden;
	height: fit-content;
	max-height: 350px;
	margin: 0;
	margin-top: -25px;
	border-top: none;
}
.transcript-header { padding: 8px 10px; border-bottom: 1px solid #21262d; font-size: 12px; }
.transcript-list { padding: 6px 10px 12px; display: grid; gap: 4px; max-height: 250px; overflow: auto; }

.line { display: grid; grid-template-columns: 90px 70px 1fr; gap: 10px; align-items: start; padding: 8px 10px; border-radius: 8px; border: 1px solid #242b33; background: #0f141a; }
.line .t { color: var(--muted); font-variant-numeric: tabular-nums; }
.line .crew { font-weight: 600; color: var(--accent); }
.line .say { color: var(--fg); }
.line.now { border-color: var(--accent); box-shadow: 0 0 0 1px rgba(88,166,255,.3); }

/* g3 gauge theme tweaks â€” aeronautical look */
#gauges text { fill: #e5ecf5; font-weight: 600; }
svg .g3-gauge-face { fill: #0b0b0b; stroke: #1b2230; }
svg .g3-axis-line { stroke: #d8dee9; stroke-width: 1.4; }
svg .g3-axis-ticks path, svg .g3-axis-ticks line { stroke: #d8dee9; stroke-width: 1.4; }
svg .g3-highlight-stroke { stroke: #2dd4bf; }
svg .g3-highlight-fill { fill: #2dd4bf; }
svg .g3-normal-fill { fill: #22c55e; }
svg .g3-danger-fill, svg .g3-danger-stroke { stroke: #ef4444; fill: #ef4444; }
svg .g3-pointer-needle, svg .g3-pointer-blade { fill: #ffffff; }
svg .g3-pointer-hub { fill: #111; stroke: #e5e7eb; stroke-width: 1; }


/* Map companion removed - transcript spans rows 2-4 */

/* Charts */
.charts {
	grid-column: 1 / 3;
	grid-row: 4 / 5;
	background: var(--card);
	border: 1px solid #21262d;
	border-radius: 12px;
	padding: 10px 12px 6px;
	min-height: 400px;
	margin-top: -16px;
}
.chart-controls { display: flex; align-items: center; gap: 12px; padding: 2px 2px 8px; }
.chart-controls .label { color: var(--muted); font-size: 13px; }
.chart-controls select { background: #0f141a; color: var(--fg); border: 1px solid #242b33; border-radius: 8px; padding: 4px 6px; }
.chart-wrap { position: relative; }
#chart { width: 100%; height: 420px; display: block; }
.legend { display: flex; align-items: center; gap: 10px; color: var(--muted); font-size: 12px; }
.legend .item { display: inline-flex; align-items: center; gap: 6px; }
.legend .sw { width: 10px; height: 10px; border-radius: 2px; display: inline-block; }

/* Map */
.map {
	grid-column: 1 / 2;
	grid-row: 3 / 4;
	background: var(--card);
	border: 1px solid #21262d;
	border-radius: 0px 0px 12px 12px;
	padding: 6px;
	margin: 0;
	margin-top: -25px;
	border-top: none;
}
#map { height: 350px; border-radius: 6px; border: 1px solid #242b33; }

/* Comms bubble */
.comms-bubble {
	position: absolute;
	right: 12px;
	top: 12px;
	max-width: 200px;
	background: linear-gradient(180deg, rgba(15,20,26,.9), rgba(15,20,26,.7));
	border: 1px solid #242b33;
	border-radius: 8px;
	-webkit-backdrop-filter: blur(8px);
	backdrop-filter: blur(8px);
	box-shadow: 0 6px 30px rgba(0,0,0,.35);
	padding: 8px 10px;
	opacity: 0;
	transform: translateY(-8px);
	transition: opacity .25s ease, transform .25s ease;
	font-size: 12px;
}
.comms-bubble.show { opacity: 1; transform: translateY(0); }
.comms-bubble .crew { color: var(--accent); font-weight: 700; font-size: 12px; }
.comms-bubble .text { color: var(--fg); font-size: 14px; }

/* Risk badges */
.risk-badges { margin-top: 8px; display: flex; flex-wrap: wrap; gap: 6px; }
.badge { display: inline-flex; align-items: center; gap: 6px; padding: 2px 8px; border-radius: 999px; border: 1px solid #2a3240; background: #0f141a; color: var(--muted); font-size: 12px; }
.badge.on { color: #fff; border-color: rgba(88,166,255,.4); box-shadow: inset 0 0 0 1px rgba(88,166,255,.2), 0 0 20px rgba(88,166,255,.08); }
.badge.danger { border-color: rgba(255,107,107,.4); box-shadow: inset 0 0 0 1px rgba(255,107,107,.2), 0 0 20px rgba(255,107,107,.08); }

/* Highlights */
#highlights .highlight-list { display: grid; gap: 8px; }
.highlight { display: grid; grid-template-columns: 70px 1fr; gap: 8px; padding: 8px; border-radius: 8px; border: 1px solid #242b33; background: #0f141a; }
.highlight .t { color: var(--muted); font-variant-numeric: tabular-nums; }
.highlight .tx { color: var(--fg); }

/* Axis and chart cosmetics */
svg .x-axis path, svg .x-axis line, svg .y-axis path, svg .y-axis line { stroke: #2a3645; }
svg .x-axis text, svg .y-axis text { fill: #8b949e; font-size: 10px; }
svg path.line { filter: drop-shadow(0 0 8px rgba(88,166,255,.15)); }

/* Live stats */
.stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.kv { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; align-items: baseline; padding: 6px 8px; border: 1px solid #242b33; border-radius: 8px; background: #0f141a; }
.kv .k { color: var(--muted); font-size: 12px; }
.kv .v { color: var(--fg); font-weight: 700; font-variant-numeric: tabular-nums; text-align: right; }

/* a11y */
.visually-hidden { position: absolute !important; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }

